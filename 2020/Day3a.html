<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>AoC2020 - Day 3 A</title>

</head>
<style>
    body {
        font-family: "Courier New";
        background-color: #181818;
        color: #9f9f9f;
        scroll-direction: horizontal;
        white-space: nowrap;
    }
    #collisions {
        position: absolute;
        top: 0;
        right: 0;
        width: 100px;
        height: 50px;
        text-align: center;
        background-color: red;
        font-size: 3rem;
        color: black;
    }
</style>
<body>
    <!--

    Comment:
        Ok wth.
    Lessons:

    -->
    <div id="collisions">

    </div>
    <script>
        class Base {
            constructor() {
            }
            print(row) {
                const newDiv = document.createElement('div');
                newDiv.innerText = row;
                document.body.appendChild(newDiv);
            }
        }
        class Row extends Base {
            constructor(rawRow) {
                super(rawRow);
                this.rawRow = rawRow;
                this.value = [];
                this.collision = false;
                this.extend();
            }
            extend() {
                this.value = this.value.concat(this.rawRow.split(''));
            }
            // Credit: https://stackoverflow.com/questions/2998784/how-to-output-numbers-with-leading-zeros-in-javascript
            pad(num, size) {
                num = num.toString();
                while (num.length < size) num = "0" + num;
                return num;
            }
            calculate(index, columnPosition) {
                while (this.value.length < columnPosition) {
                    this.extend();
                }
                const viewOnly = this.value.slice();
                if (columnPosition != 0) {
                    const intersect = this.value[columnPosition];
                    if (intersect === '.') {
                        viewOnly[columnPosition] = `O`;
                    } else {
                        this.collision = true;
                        viewOnly[columnPosition] = `X`;
                    }
                }
                // this.visualizeRow(index, this.value.join(''));
                this.visualizeRow(index, viewOnly.join(''));
            }
            visualizeRow(index, out) {
                this.print(`${this.pad(index, 3)} ${out}`);
            }
        }
        class Start extends Base {
            constructor(input) {
                super();
                this.input = input;
                this.rows = [];
                this.slopeY = 1;
                this.slopeX = 3;
                this.ptrX = 0;
                this.ptrY = 0;
                this.input.forEach((rawRow) => {
                    const row = new Row(rawRow);
                    this.rows.push(row);
                });
            }
            increment() {
                this.ptrX += this.slopeX;
                this.ptrY += this.slopeY;
            }
            visualizeLandscape() {
                this.rows.forEach((row) => {
                    row.calculate(this.ptrY, this.ptrX);
                    this.increment();
                });
            }
        }

        const puzzleData = ['.#..............##....#.#.####.','##..........#.....##...........','.......#....##...........#.#...','.........#.#...#..........#....','.........#..#................##','..#...#..#..#...........#......','...................#...##..##..','........#.....##...#.#.#...#...','#..#.##......#.#..#..........#.','......#.#...#.#...#........##.#','.....#.####........#...........','...###..#............#.........','.....#.......##......#...#.....','#......##......................','......#..............#.........','..##...#....###.##.............','#...#..........#.#.........#...','...........#........#...#......','.....##.........#......#..#....','#..............#....#.....#....','.#......#....#...#............#','.####..........##..#.#.........','....#...#......................','....................#....#.#...','..........###.#...............#','.#...........#...##............','.#.#..#.....#...#....#.......#.','.##........#..#....#...........','.........#.....#......###......','..............#..#.......#.....','........#..#.#...........#..#..','#.........#......#.....##.#.#..','........#.#.#....#.............','........#........#.#.##........','#......#.#..........#..#.......','..#....#...##......###..#..#...','............#..#.#.........#...','....#.#...........#..........##','.......#.#.#..#......#...#.....','..#.........##.#.........#...#.','......#....#.#....#........#.#.','.#....###....#..............#..','.#....#.......#....#..#.....#..','.....#.....#...................','..#.....#......#......#........','......##.##...#...#...#...#.##.','##...#....#...#..#...#...#.....','..#.....#...#...##.##...#......','.....#.............##...#......','.....................#.##..#...','#...#....#....#........#.....#.','..#...#.........#...#..#.....#.','#.#......#...................#.','..#...........##...............','..#....#........#..#...........','...........#...................','.............###......#....#...','...........#...#....#..#....#..','.....##............#.#.......#.','.....#..#....#...#....#........','...............##........#.#...','.........#...#.#....#.......#..','#..#.......#.......#...#.......','..#...........................#','......#.......#..#......#......','.#.......#..................##.','..#.........#..#.##.#....#...##','...#..#....#...#....#.#........','.#...#........##..#..#.......#.','.....#........#....#....#..#...','............#...........#......','..###.......#..#....#......#...','.....#...#.......#..#..........','..#........##.#....##..........','#....#.............#..##......#','....#.................##.......','...#.......#........#....##.#.#','##..##..#.....#.....#..........','...#...............#....#..#...','.#...##....#....#.....#....##..','...#.....#......#......#.......','#.....#.......##.....#..#....##','.....#.#...##.#......##....#.#.','..........#....#.#...#.........','.#..##...#.....................','...........##..#...#....#......','...#......#........#.......#...','.#......#..#........#.....#..#.','.......#........##..#.##....#..','.##..........#..#...#.....#....','.....##...............#.#......','..##.....#..#......#..##.#.#...','....#......#.##...........#....','#.#..#.......#......#.#........','...#.#..#....#............#..#.','...#..........###....#....#...#','........##...#.......#..#....#.','..#...#.....#..#........##.....','...#..#.##.#.#.##..............','.......#...#.........#.....#..#','..#.....#.#..........#..#......','......#..........#......#.....#','.#...........#........#......##','..##............#......#...#..#','#..................#...........','#....#..#.........#........#..#','..#.#....###..#...#...##...##..','...#....#..#.....#.............','.#........##.##...#....#...#...','.........#.......##.#.....##...','#.#.....##...#........#...#...#','.....#.#.##...#.....#.##..#....','........#...##...#...#.#..#..#.','.##....#.##...#.......#........','...#..#................#..#....','....#.......#......#...#.##....','#......###..#...#......#.......','..#...#...##...........##......','.......#...#..##....##......#..','....#.#.............#.#...##..#','..........#........#...#......#','............#.#.#....###.......','#..#...#.#.####...#..#...#.....','.##.......#.##...#.............','#..#...........#.#.##.......#..','...#..#.#...#...###..#.#..#.#..','..#...#.....#..#....#....#.....','.........##.......#............','.........##.##......###........','.............#.#....#..#.....#.','...#....#.#.......#......##....','............#..................','....##...#..........#...#..#...','#..#....#.....#.......#.##.#..#','.....#.........##.............#','#.....#.#...#............##..##','..............#....#.....#.....','.#....###..#.#.....###.#..#....','.....#....##...#....#......#...','..........#...#....#...........','............#....#..#.........#','..##.....#.#...#.......#...#...','...#...#..#......##...#.....##.','......#.##............##.#....#','....#......#...##.....#.....###','.#.###...............#...#.#...','..#....................##...#..','.......#.....##...........#....','#.........#....#....#....#....#','..#.#..##.#.#..................','.....#.......#................#','...........#.......#........#..','#...#.........#.#.....#.....#..','..........#..#...........#.....','#..#.##..##..#.#.##.........#..','#..#..#....##..#.........#.....','#.#.......................#.#..','.##......#.#...#......#....#...','..#.#................#..##.....','.......#..................#...#','.....#.........##.#....#.......','#..........#..#.#..........#..#','..#..#.....#.........#...#.....','..............#.....#..#...#.##','...............................','...#............##......#.....#','.......#..#.............#.#....','...........#..........#........','...#.####..#......#...#....#...','##......#.##.....#.............','....#.........#...#...........#','...#........#.......#.#..#.#.#.','..#.......#.........#....#.....','................#.#.#.##...#..#','#.##...#...#..#.....#.....#..#.','...............#...........#...','.....##.#...............##...#.','.#..##.##......................','.......#.........#..#..#.......','...#......#..................#.','...#.#..#....#....#............','...........#...#..#....##......','.....#...#..#.#....#....#....#.','.......#...#...#.#.#...........','....#......#......#...##..#....','##...#.#.....#..#.##...........','#.#..#.....#..#................','...#..#.#......#.#...........##','##....#...#.....###..#...#....#','...#.....#.#.#......##...#...#.','............#.......#..........','....#..........###.......#.....','.................##..##....#...','...........#........##..#......','...#.#...#.....#........#...#..','#...#.#......#.#...........#...','..#..........#....#..........#.','..#................#...........','#...#.#....#.#.......#.........','.#...........##..#....#....#..#','.##........#.....#...#..#....#.','......#......#...#.............','.......#..#...#.##....#..#.#...','.......#......#....#....#.#.#..','..........##.....#....##.#.....','.........##..#...#.....#..#....','...#....#..........#..#...#..#.','.......#.....##.#..#.....#...#.','#...#......#......#...#........','#..#....#.#......#......#......','.......#.##....................','...##...#.....#......##......#.','.#...................###.......','....#........###...#........#..','...#............#.....#..#.....','..................#......#....#','..##......#..##..##......#.#...','........##....##.......#...#...','.#.#....#.....#.....#....#....#','...##.#.............#....##....','.........#.....#...#......#....','..#.....#............#....##...','..##.....#.....##.##...........','#....#.#.......#..#......#.....','##.......#.....#.....####....#.','##...#.......#...#.....#.......','#.....#..##.##...##..#.....#..#','..........#......#..#.#........','..##.#......#..............#...','.#...#..........#.......#....#.','..#....##...#...........#....#.','..#.........#..#......#......#.','.##....#......#.#.........#..##','.......#...#....##............#','.##.................#.#........','...#.#...#..#..#.....#.#.......','.#.#.......#...................','..#..#.....#......#.....##..##.','.#........#.##......#..........','....##...#............#.#....#.','.......#.#..#....##.#....#....#','......####...#..#.....#........','..........#..#.........#.#..#.#','..........##.........#.##......','.##..#.#.....#.....#....#......','............#..#...............','.....##.........#...#...##...##','........#.##.#...#.....#....#.#','#......##.#.##..........##.....','#..#..#........#.........#..#..','...............#.#..##.........','.#.......##.#..#....#...#....##','.#..##.....##......#....#...#.#','........#...#.........#.....#.#','...........#............#...#..','................#...........#..','..............##........#....#.','..........#.....##.....#..#....','#......#....###..#..#..........','.....#.#.....##....#.#.......#.','...#...#...............#.#.....','.............#.......#.........','.....#.....#..#......#.....#...','.........#.................#.##','.#.....#.##..#.................','..#......#.......#.....#...#..#','..#..#.#.#...#.......#.##......','..........#..#.........#.......','.#..........#...#....#..#...##.','.#.#.#.###.....#...#.#.#.......','....##............#............','.#.#.............#..#......#.#.','.#.#..........##..#.....#..#.#.','...........#.##..#...#.#.....#.','...........#..#....#...........','..#................#.#...#....#','...............##........##....','....#.............#........#...','...#......#.#.#........#.......','#..............#..##.#..##.....','.#.#.###................##.....','.............#..#.........#....','.......##..#............#...#..','...#...#...........#.....#.....','........#......#.#.#......#..#.','#.##.......#......#..#..#.#....','...#........#...........#...#..','..#...........#.........#......','.............#....#....#.......','....#.........#........#......#','..#............##..#.........#.','.#...#...#..#...#........#..#..','...#....##..............#......','...........#...#....#.#.##..###','..#....#......#.........#..#...','.......#...#...................','.#...#.#...................#...','.#.....##.#.......#.#.#...##..#','.....#..#.#.........#...#..##..','.#..#.##.#......#......#.#...#.','......#..#....##..#....##....##','#...#......##........##........','.#.........###................#','.................#..###..#.#...','..#.#........#..#........#...#.','#.#....#....#..#...#.#......#..','.#.#.............###.........#.','.....#...............##...#...#','..............#...#........#..#','...................#..#.......#','#......................#.....#.','...#.........#..##...#...#.##..','.....#..........#.........#....','.....#...#............#..#.....','.............#............#....','...#.........#.................','#...........#.#...............#','.....#...#.....#..#.##.......##','...#....#.#...........#........','.........................#.#...','.#..#...........#.#........#...','.............#.#.....#..#....#.','.....#...#.###...#..#........#.'];
        const app = new Start(puzzleData);
        app.visualizeLandscape();
        document.getElementById('collisions').innerText = app.rows.filter((row) => row.collision).length;
        console.log(app.rows.filter((row) => row.collision));

    </script>
</body>
</html>
